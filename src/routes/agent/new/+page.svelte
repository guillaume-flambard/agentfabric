<script lang="ts">
  import AgentCreator from '$lib/components/agent-creator/AgentCreator.svelte';
  import { page } from '$app/stores';
  import { goto } from '$app/navigation';
  import type { AgentTemplate, AgentConfiguration } from '$lib/types/agent';

  // Exemple de mod√®les d'agents pr√©d√©finis
  const templates: AgentTemplate[] = [
    {
      id: 'linkedin-ghostwriter',
      name: 'R√©dacteur LinkedIn',
      description: 'Cr√©e des publications LinkedIn engageantes et professionnelles',
      category: 'R√©daction',
      tags: ['r√©seaux sociaux', 'contenu', 'marketing'],
      defaultPrompt: `Tu es un expert en r√©daction pour LinkedIn. Ton r√¥le est de cr√©er des publications engageantes qui mettent en valeur l'expertise de l'utilisateur. Les publications doivent √™tre professionnelles, inspirantes et inciter √† l'engagement. Utilise des appels √† l'action clairs et des questions pour stimuler les commentaires.`,
      icon: 'üìù'
    },
    {
      id: 'pdf-summarizer',
      name: 'R√©sumeur de PDF',
      description: 'Extrait les points cl√©s des documents PDF',
      category: 'Productivit√©',
      tags: ['document', 'r√©sum√©', 'analyse'],
      defaultPrompt: `Tu es un assistant qui aide √† r√©sumer des documents PDF. Ton r√¥le est d'extraire les informations les plus importantes et de les pr√©senter de mani√®re claire et concise. Inclus les points cl√©s, les donn√©es importantes et les conclusions. Si le document contient des sections, organise ton r√©sum√© de mani√®re similaire.`,
      icon: 'üìÑ'
    },
    {
      id: 'seo-assistant',
      name: 'Assistant SEO',
      description: 'Optimise le contenu pour le r√©f√©rencement',
      category: 'Marketing',
      tags: ['r√©f√©rencement', 'contenu', 'web'],
      defaultPrompt: `Tu es un expert en SEO. Analyse le contenu fourni et propose des am√©liorations pour optimiser son r√©f√©rencement. Inclus des suggestions de mots-cl√©s, des conseils sur la structure, les balises m√©ta et d'autres optimisations techniques. Explique pourquoi chaque suggestion est importante pour le r√©f√©rencement.`,
      icon: 'üîç'
    }
  ];

  async function handleSave(agentConfig: AgentConfiguration) {
    try {
      // Ici, nous allons impl√©menter la sauvegarde de l'agent
      // Pour l'instant, nous allons simplement rediriger vers la page de l'agent
      await goto(`/agent/${agentConfig.id}`);
    } catch (error) {
      console.error('Erreur lors de la cr√©ation de l\'agent:', error);
      // G√©rer l'erreur (afficher un message √† l'utilisateur, etc.)
    }
  }
</script>

<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
  <div class="text-center mb-10">
    <h1 class="text-3xl font-extrabold text-gray-900 sm:text-4xl">
      Cr√©er un nouvel agent IA
    </h1>
    <p class="mt-3 max-w-2xl mx-auto text-xl text-gray-500 sm:mt-4">
      S√©lectionnez un mod√®le ou cr√©ez un agent personnalis√©
    </p>
  </div>
  
  <div class="bg-white shadow rounded-lg p-6">
    <AgentCreator 
      {templates} 
      onSave={handleSave}
    />
  </div>
</div>
